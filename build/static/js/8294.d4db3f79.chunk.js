"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8294],{79594:(e,o,r)=>{r.r(o),r.d(o,{default:()=>g});var s=r(65043),t=r(37490),a=r(4015),n=r(54462),l=r(9320);const c=`${r(81895).i$}/api/mypage/coupon`;var i=r(70579);const d=()=>{const[e,o]=(0,s.useState)([]),[r,d]=(0,s.useState)([]),{loginState:u}=(0,n.A)(),g=u.email;window.scrollTo(0,0),(0,s.useEffect)((()=>{h(),m()}),[]);const h=async()=>{try{const e=g,r=await(async e=>{try{return(await l.A.get(`${c}/available`,{params:{email:e}})).data}catch(o){throw console.error("Error fetching available coupons:",o),o}})(e);o(r)}catch(e){console.error("Error fetching available coupons:",e)}},m=async()=>{try{const e=await(async e=>{try{if(!e)throw new Error("User email not found in localStorage");return(await l.A.get(`${c}/myCoupons`,{params:{email:e}})).data}catch(o){throw console.error("Error fetching my coupons:",o),o}})(g);d(e.map((e=>({...e,isUsed:null!==e.useDate}))))}catch(e){console.error("Error fetching my coupons:",e)}},p=async e=>{const o=r.find((o=>o.couponId===e));if(null!==o&&void 0!==o&&o.isUsed)alert("This coupon has already been used!");else if(o)alert("You already added this coupon!");else try{await(async(e,o)=>{try{if(!o)throw new Error("User email not found in localStorage");await l.A.post(`${c}/add/${o}`,null,{params:{couponId:e}})}catch(r){throw r.response&&401===r.response.status?console.error("Authentication failed. Redirecting to login."):console.error("Error adding coupon:",r),r}})(e,g),m(),alert("Coupon added to your list!")}catch(s){console.error("Error adding coupon to my list:",s)}};return(0,i.jsxs)("div",{className:"min-h-screen p-6 flex flex-col items-center bg-gray-100 mt-16 mb-10",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-800 text-center mb-10",children:"Coupons"}),(0,i.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-md p-4 mb-8",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"New Offers"}),e.length>0?(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4",children:e.map((e=>{const o=r.some((o=>o.couponId===e.couponId));return(0,i.jsxs)("div",{className:`p-3 ${o?"bg-white":"bg-gray-200"} text-gray-900 rounded-md shadow-sm flex flex-col justify-between`,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-base font-bold",children:e.couponName}),(0,i.jsxs)("p",{className:"text-xs",children:["Expires: ",e.expirationDate]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,i.jsx)(t.A,{count:`\u20a9${e.discount}`,style:{backgroundColor:"#52c41a"}}),(0,i.jsx)(a.Ay,{onClick:()=>p(e.couponId),disabled:o,className:""+(o?"bg-gray-300 text-gray-600":"bg-yellow-500 text-white font-bold"),children:o?"Added To My Coupon":"Add"})]})]},e.couponId)}))}):(0,i.jsx)("p",{className:"text-center text-gray-500",children:"No new offers available."})]})]})};var u=r(87728);const g=()=>(0,i.jsx)(u.A,{children:(0,i.jsx)("div",{className:"p-4 w-full bg-gray-100",children:(0,i.jsx)(d,{})})})},11128:(e,o,r)=>{r.d(o,{nP:()=>n});var s=r(60436),t=r(62979);const a=t.s.map((e=>`${e}-inverse`));function n(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?[].concat((0,s.A)(a),(0,s.A)(t.s)).includes(e):t.s.includes(e)}},62979:(e,o,r)=>{r.d(o,{s:()=>s});const s=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},8835:(e,o,r)=>{r.d(o,{A:()=>t});var s=r(62979);function t(e,o){return s.s.reduce(((r,s)=>{const t=e[`${s}1`],a=e[`${s}3`],n=e[`${s}6`],l=e[`${s}7`];return Object.assign(Object.assign({},r),o(s,{lightColor:t,lightBorderColor:a,darkColor:n,textColor:l}))}),{})}}}]);
//# sourceMappingURL=8294.d4db3f79.chunk.js.map