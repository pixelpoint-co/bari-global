"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5746],{95746:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var l=t(65043),a=(t(3324),t(73216)),c=t(81895),r=t(86844),n=t(52194),i=t(3567),x=t(37490),d=t(31882),o=t(59654),m=t(81210),h=t(53722),g=t(85382),u=t(35653),j=t(70579);const f={tno:0,tname:"",categoryName:"",tdesc:"",tprice:0,tlocation:"",uploadFileNames:[],tdate:[],maxCapacity:0},p=e=>{let{tno:s}=e;const[t,p]=(0,l.useState)(f),[b,N]=(0,l.useState)(!1),[v,y]=(0,l.useState)(""),[w,A]=(0,l.useState)(0),[S,k]=(0,l.useState)(0),[C,Y]=(0,l.useState)(!1),[D,T]=(0,l.useState)(0),[$,F]=(0,l.useState)([]),[M,L]=(0,l.useState)(!1),[P,E]=(0,l.useState)(0),B=(0,a.Zp)();(0,l.useEffect)((()=>{window.scrollTo(0,0),N(!0),(0,g.aB)(s).then((e=>{p(e),N(!1)})),console.log(t),(0,c.s8)(s).then((e=>{console.log(e),F(e),T((e=>{if(0===e.length)return 0;const s=e.reduce(((e,s)=>e+s.rating),0)/e.length;return Number(s.toFixed(1))})(e))}))}),[s,M]),(0,l.useEffect)((()=>{console.log(v),v&&(A(0),(0,g.yb)(s,v).then((e=>{console.log(e),E(e)})))}),[v,s]);const O=(0,j.jsxs)("div",{style:{width:300},children:[(0,j.jsx)(n.A,{fullscreen:!1,onSelect:e=>y(e.format("YYYY-MM-DD")),disabledDate:e=>!t.tdate.some((s=>s===e.format("YYYY-MM-DD")))}),(0,j.jsx)("div",{style:{textAlign:"center",marginTop:10,color:"#888"},children:"Only available dates can be selected"})]});return(0,j.jsxs)("div",{className:"min-h-screen py-12 px-4 sm:px-14 lg:px-20 lg:py-32 mt-20",children:[(0,j.jsxs)("div",{className:"flex flex-col lg:flex-row items-start space-y-8 lg:space-y-0 lg:space-x-8",children:[(0,j.jsx)("div",{className:"lg:flex-1",children:(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)("img",{src:`${c.i$}/api/tours/view/${t.uploadFileNames[S]}`,alt:"Tour",className:"w-full h-60 md:h-80 lg:h-[500px] object-cover"}),(0,j.jsx)("div",{className:"flex mt-4 space-x-2 overflow-x-auto",children:t.uploadFileNames.map(((e,s)=>(0,j.jsx)("button",{onClick:()=>k(s),className:"w-16 h-16 md:w-20 md:h-20 overflow-hidden "+(S===s?"ring-2 ring-blue-500":""),children:(0,j.jsx)("img",{src:`${c.i$}/api/tours/view/${e}`,alt:"Thumbnail",className:"w-full h-full object-cover"})},s)))})]})}),(0,j.jsxs)("div",{className:"lg:flex-1",children:[(0,j.jsx)("h1",{className:"text-3xl md:text-4xl font-light text-gray-900 mb-4",children:t.tname}),(0,j.jsxs)("div",{className:"flex items-center mb-4",children:[[...Array(5)].map(((e,s)=>(0,j.jsx)("span",{children:D>=s+1?(0,j.jsx)(d.A,{className:"text-yellow-400 text-xl"}):(0,j.jsx)(o.A,{className:"text-gray-300 text-xl"})},s))),(0,j.jsxs)("span",{className:"ml-2 text-gray-600",children:["(",D,") ",$.length,"  reviews"]})]}),(0,j.jsxs)("p",{className:"text-xl md:text-2xl font-light text-gray-900 mb-6",children:["\u20a9",t.tprice.toLocaleString()]}),(0,j.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,j.jsx)("strong",{children:"Tour Address:"})," ",t.taddress]}),(0,j.jsx)("p",{className:"text-gray-700 mb-6",children:t.tdesc}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-gray-700 mb-2",children:[(0,j.jsx)(m.A,{className:"mr-2"}),"Date"]}),(0,j.jsx)(i.A,{content:O,trigger:"click",children:(0,j.jsx)("button",{className:"w-full border rounded-lg p-3 text-left",children:v||"Select a date"})})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-gray-700 mb-2",children:[(0,j.jsx)(h.A,{className:"mr-2"}),"Person"]}),(0,j.jsx)("input",{type:"number",min:"0",max:P,value:w,onChange:e=>A(Number(e.target.value)),className:"w-full border rounded-lg p-3 text-center",placeholder:"0"})]})]}),(0,j.jsxs)("div",{className:"p-2 rounded-lg flex justify-end items-center space-x-3",children:[(0,j.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:[(0,j.jsx)("span",{children:"Available"}),(0,j.jsx)(x.A,{count:v?P>0?P:"Full":"Select a Date",style:{backgroundColor:v?P>0?"#14b8a6":"#ef4444":"#d9d9d9",color:"white",marginLeft:"5px"}})]}),(0,j.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:[(0,j.jsx)("span",{children:"Max"}),(0,j.jsx)(x.A,{count:t.maxCapacity,style:{backgroundColor:"#3b82f6",color:"white",marginLeft:"5px"}})]})]}),(0,j.jsx)("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mt-6",children:(0,j.jsxs)("button",{onClick:()=>{window.confirm("Please log in first to book the tour.")&&B("/member/login")},className:"bg-stone-400 hover:bg-stone-600 text-white py-3 px-6 rounded-lg flex items-center justify-center",children:[(0,j.jsx)(m.A,{className:"mr-2"}),"Update Availability"]})}),(0,j.jsxs)("div",{className:"mt-10 bg-gray-100 p-6 rounded-lg",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center",children:[(0,j.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Tour Policies"}),(0,j.jsx)("button",{onClick:()=>Y(!C),className:"text-gray-500 hover:text-gray-700 text-2xl",children:C?"-":"+"})]}),C&&(0,j.jsx)(u.A,{})]})]})]}),(0,j.jsx)("div",{className:"mt-5",children:(0,j.jsx)(r.A,{refresh:M,setRefresh:L,reviews:$})})]})},b=()=>{const{tno:e}=(0,a.g)();return(0,j.jsx)("div",{className:"p-4 w-full bg-white",children:(0,j.jsx)(p,{tno:e})})}}}]);
//# sourceMappingURL=5746.f67cc0ba.chunk.js.map