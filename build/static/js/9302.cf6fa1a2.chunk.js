/*! For license information please see 9302.cf6fa1a2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9302],{89302:(e,l,a)=>{a.r(l),a.d(l,{default:()=>b});var s=a(65043),t=a(39292);const r=(0,a(77784).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var o=a(24994),i=a(70579);const n={container:{marginBottom:"12px"},label:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"4px"},input:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #e5e7eb",fontSize:"14px"},textarea:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #e5e7eb",fontSize:"14px",minHeight:"80px",resize:"vertical"}},c={container:{maxWidth:"800px",margin:"0 auto",padding:"16px"},buttonGroup:{display:"flex",gap:"8px"},flexRow:{display:"flex",alignItems:"center",gap:"8px"},grid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},iconText:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"}},d={base:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",fontWeight:"500",cursor:"pointer",border:"none",transition:"background-color 0.2s",gap:"8px"},primary:{backgroundColor:"#2563eb",color:"white"},destructive:{backgroundColor:"#dc2626",color:"white"},secondary:{backgroundColor:"#e5e7eb",color:"#1f2937"},ghost:{backgroundColor:"transparent",color:"#1f2937"},small:{padding:"4px 8px",fontSize:"12px"}},p=e=>{let{children:l,variant:a="primary",size:s="default",...t}=e;return(0,i.jsx)("button",{...t,style:{...d.base,...d[a],..."small"===s&&d.small,...t.style},children:l})};var m=a(54462);const x=[{value:"K-Beauty",label:"K-Beauty"},{value:"Fashion",label:"Fashion"},{value:"Gourmet",label:"Gourmet"},{value:"Exotic Tea",label:"Exotic Tea"}],u=[0,3e3],h={pno:0,pname:"",pdesc:"",pprice:0,pqty:0,shippingFee:0,categoryName:"",categoryType:"product",files:[]},g=e=>{var l;let{isEditing:a,initialData:t,onClose:r,selectedPno:n}=e;console.log("isEditing:",a),console.log("selectedPno:",n),console.log("initialData:",t);const[c,d]=(0,s.useState)(a?t:{...h}),[p,m]=(0,s.useState)([]),[g,f]=(0,s.useState)([]);(0,s.useEffect)((()=>{d((e=>({...e,categoryType:"product"})))}),[a]);const v=e=>{const{name:l,value:a}=e.target;d("categoryName"===l?{...c,categoryName:a,categoryType:"product"}:"shippingFee"===l||"pprice"===l||"pqty"===l?{...c,[l]:Number(a)}:{...c,[l]:a})};(0,s.useEffect)((()=>()=>{p.forEach((e=>{URL.revokeObjectURL(e.preview)})),c.files&&c.files.forEach((e=>{e instanceof File&&URL.revokeObjectURL(URL.createObjectURL(e))}))}),[p,c.files]);return(0,s.useEffect)((()=>{if(a&&t){(async()=>{var e;if((null===(e=t.uploadFileNames)||void 0===e?void 0:e.length)>0)try{const e=t.uploadFileNames.map((async e=>{const l=await fetch(`http://localhost:8080/api/product/image/${e}`),a=await l.blob();return new File([a],e,{type:a.type})})),l=await Promise.all(e);d({...t,files:l})}catch(l){console.error("\uc774\ubbf8\uc9c0 \ub85c\ub4dc \uc2e4\ud328:",l)}})()}}),[a,t]),(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold",children:a?"\uc81c\ud488 \uc218\uc815":"\uc0c8 \uc81c\ud488 \ub4f1\ub85d"}),(0,i.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:"\xd7"})]}),(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{var l;const e=new FormData,t={...a&&{pno:c.pno},pname:c.pname,pdesc:c.pdesc,pprice:c.pprice,pqty:c.pqty,shippingFee:c.shippingFee,categoryName:c.categoryName,categoryType:"product"};if(Object.entries(t).forEach((l=>{let[a,s]=l;void 0!==s&&e.append(a,String(s))})),(null===(l=c.files)||void 0===l?void 0:l.length)>0&&c.files.forEach((l=>{l instanceof File&&e.append("files",l)})),a){if(g.length>0)for(const e of g)try{await(0,o.Us)(e.pno,e.fileName)}catch(s){console.error("\uc774\ubbf8\uc9c0 \uc0ad\uc81c \uc2e4\ud328:",s)}await(0,o.wS)(c.pno,e),alert("\uc81c\ud488\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}else await(0,o.Bj)(e),alert("\uc81c\ud488\uc774 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");r(),window.location.reload()}catch(s){console.error("\uc81c\ud488 \ucc98\ub9ac \uc911 \uc624\ub958:",s),alert("\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"font-bold mb-1",children:"\uc81c\ud488\uba85"}),(0,i.jsx)("input",{className:"border rounded p-2",name:"pname",value:c.pname,onChange:v,required:!0})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"font-bold mb-1",children:"\uce74\ud14c\uace0\ub9ac"}),(0,i.jsxs)("select",{className:"border rounded p-2",name:"categoryName",value:c.categoryName,onChange:v,required:!0,children:[(0,i.jsx)("option",{value:"",children:"\uce74\ud14c\uace0\ub9ac \uc120\ud0dd"}),x.map((e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"font-bold mb-1",children:"\uc124\uba85"}),(0,i.jsx)("textarea",{className:"border rounded p-2 h-24",name:"pdesc",value:c.pdesc,onChange:v})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"font-bold mb-1",children:"\uac00\uaca9"}),(0,i.jsx)("input",{className:"border rounded p-2",type:"number",name:"pprice",value:c.pprice,onChange:v,required:!0}),(0,i.jsx)("label",{className:"font-bold mt-2 mb-1",children:"\ubc30\uc1a1\ub8cc"}),(0,i.jsxs)("select",{className:"border rounded p-2",name:"shippingFee",value:c.shippingFee,onChange:v,required:!0,children:[(0,i.jsx)("option",{value:"",children:"\ubc30\uc1a1\ub8cc \uc120\ud0dd"}),u.map((e=>(0,i.jsx)("option",{value:e,children:`${e.toLocaleString()}\uc6d0`},e)))]})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"font-bold mb-1",children:"\uc7ac\uace0"}),(0,i.jsx)("input",{className:"border rounded p-2",type:"number",name:"pqty",value:c.pqty,onChange:v,required:!0})]})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("label",{className:"font-bold mb-1",children:["\uc774\ubbf8\uc9c0 (\ucd5c\ub300 ",10,"\uac1c)"]}),(0,i.jsx)("input",{className:"border rounded p-2",type:"file",multiple:!0,accept:"image/*",onChange:e=>{const l=Array.from(e.target.files||[]);if(!l.length)return;const a=c.files||[];a.length+l.length>10?alert("\uc774\ubbf8\uc9c0\ub294 \ucd5c\ub300 10\uac1c\uae4c\uc9c0\ub9cc \uc120\ud0dd \uac00\ub2a5\ud569\ub2c8\ub2e4."):l.every((e=>e.type.startsWith("image/")))?d((e=>({...e,files:[...a,...l]}))):alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.")}}),(null===(l=c.files)||void 0===l?void 0:l.length)>0&&(0,i.jsx)("div",{className:"mt-4 flex flex-col gap-2",children:(0,i.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:c.files.map(((e,l)=>(0,i.jsxs)("div",{className:"relative w-24 h-24 flex-shrink-0 mt-3 mr-1",children:[(0,i.jsx)("img",{src:URL.createObjectURL(e),alt:`Preview ${l+1}`,className:"w-full h-full object-cover rounded"}),(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{if(a&&c.uploadFileNames&&c.uploadFileNames[e]){const l=c.uploadFileNames[e];f((e=>[...e,{fileName:l,pno:c.pno}]))}d((l=>({...l,files:l.files.filter(((l,a)=>a!==e)),uploadFileNames:l.uploadFileNames?l.uploadFileNames.filter(((l,a)=>a!==e)):[]})))})(l),className:"absolute -top-2 -right-2 bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-lg font-bold shadow-md hover:bg-red-600",children:"x"})]},l)))})})]}),(0,i.jsxs)("div",{className:"flex gap-2 justify-end mt-6",children:[(0,i.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:a?"\uc218\uc815\ud558\uae30":"\ub4f1\ub85d\ud558\uae30"}),(0,i.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"\ucde8\uc18c"})]})]})]})})},f={dtoList:[],pageNumList:[],pageRequestDTO:null,prev:!1,next:!1,totalCount:0,prevPage:0,nextPage:0,totalPage:0,current:1,pno:0,pname:"",categoryName:"",pdesc:"",pprice:0,pqty:0,uploadFileNames:[]},v="http://localhost:8080/api",j=()=>{var e,l;const[a,d]=(0,s.useState)(f),[x,u]=(0,s.useState)(!1),[h,j]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null),[N,w]=(0,s.useState)(!1),[k,C]=(0,s.useState)(1),[F,S]=(0,s.useState)(9),[L,q]=(0,s.useState)(""),[E,R]=(0,s.useState)("t"),[z,P]=(0,s.useState)(!1),{exceptionHandle:$}=(0,m.A)(),A=()=>{console.log("\uc0c1\ud488 \ubaa9\ub85d \uc694\uccad:",{"\ud398\uc774\uc9c0":k,"\uc0ac\uc774\uc988":F,"\uac80\uc0c9\uc5b4":L,"\ud0c0\uc785":E}),P(!0),(0,o.BD)({page:k,size:F,keyword:L,type:E}).then((e=>{d(e)})).catch((e=>{console.error("\ub370\uc774\ud130 \uc870\ud68c \uc2e4\ud328:",e),$(e)})).finally((()=>{P(!1)}))},D=e=>{console.log("\ud398\uc774\uc9c0 \ubcc0\uacbd \uc2dc\ub3c4:",{"\ud604\uc7ac\ud398\uc774\uc9c0":k,"\uc0c8\ud398\uc774\uc9c0":e,"\uc804\uccb4\ud398\uc774\uc9c0":a.totalPage});try{C(e)}catch(l){console.error("\ud398\uc774\uc9c0 \ubcc0\uacbd \uc911 \uc624\ub958 \ubc1c\uc0dd:",l)}},B=e=>{(0,o.oo)(e).then((e=>{y(e),w(!0),console.log("Product data:",e)})).catch((e=>{console.error("Get product error:",e),$(e)}))},T=()=>{j(!1),u(!1),y(null),A()};return(0,s.useEffect)((()=>{A()}),[k,F,L,E]),(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsxs)("div",{style:c.flexRow,children:[(0,i.jsxs)("div",{style:{flex:1,...c.flexRow},children:[(0,i.jsx)("input",{style:n.input,placeholder:"\uc81c\ud488 \uc774\ub984 \ub610\ub294 \uce74\ud14c\uace0\ub9ac \uac80\uc0c9",value:L,onChange:e=>q(e.target.value)}),(0,i.jsxs)(p,{onClick:A,style:{width:"100px"},children:[(0,i.jsx)(t.A,{size:16}),"\uac80\uc0c9"]})]}),(0,i.jsxs)(p,{onClick:()=>{j(!0),u(!1),y(null),w(!1)},children:[(0,i.jsx)(r,{size:16}),"\uc0c8 \uc81c\ud488"]})]}),(0,i.jsx)("div",{style:{height:"24px"}}),(0,i.jsxs)("div",{style:{position:"relative",zIndex:1},children:[(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:a.dtoList&&a.dtoList.map((e=>{var l;return(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg",children:e.uploadFileNames&&Array.isArray(e.uploadFileNames)&&e.uploadFileNames.length>0?(0,i.jsx)("img",{src:`${v}/product/image/${e.uploadFileNames[0]}`,alt:e.pname,className:"h-48 w-full object-cover",onClick:()=>B(e.pno),onError:l=>{l.target.onerror=null,console.log("\uc774\ubbf8\uc9c0 \ub85c\ub4dc \uc2e4\ud328:",e.uploadFileNames[0])}}):(0,i.jsx)("div",{className:"h-48 w-full bg-gray-200 flex items-center justify-center",onClick:()=>B(e.pno),children:(0,i.jsx)("span",{className:"text-gray-500",children:"\uc774\ubbf8\uc9c0 \uc5c6\uc74c"})})}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:e.pname}),(0,i.jsxs)("p",{className:"text-gray-600",children:[null===(l=e.pprice)||void 0===l?void 0:l.toLocaleString(),"\uc6d0"]})]})]})},e.pno)}))}),(0,i.jsxs)("div",{className:"mt-8 flex justify-center gap-2",children:[a.prev&&(0,i.jsx)(p,{onClick:()=>{console.log("\uc774\uc804 \ud398\uc774\uc9c0 \ud074\ub9ad:",a.prevPage),D(a.prevPage)},children:"\uc774\uc804"}),null===(e=a.pageNumList)||void 0===e?void 0:e.map((e=>(0,i.jsx)(p,{onClick:()=>D(e),className:e===a.current?"bg-rose-500":"",children:e},e))),a.next&&(0,i.jsx)(p,{onClick:()=>D(a.nextPage),children:"\ub2e4\uc74c"})]}),N&&b&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[1001]",onClick:()=>w(!1),children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold",children:b.pname}),(0,i.jsx)("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden",children:(null===b||void 0===b||null===(l=b.uploadFileNames)||void 0===l?void 0:l.length)>0?(0,i.jsx)("img",{src:`${v}/product/image/${b.uploadFileNames[0]}`,alt:b.pname,className:"w-full h-full object-cover"}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,i.jsx)("span",{className:"text-gray-500",children:"\uc774\ubbf8\uc9c0 \uc5c6\uc74c"})})}),b.uploadFileNames&&b.uploadFileNames.length>1&&(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"grid grid-cols-4 gap-2",children:b.uploadFileNames.slice(1).map(((e,l)=>(0,i.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden",children:(0,i.jsx)("img",{src:`${v}/product/image/${e}`,alt:`${b.pname} ${l+2}`,className:"w-full h-full object-cover"})},l)))})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"\uce74\ud14c\uace0\ub9ac"}),(0,i.jsx)("p",{className:"text-gray-600",children:b.categoryName})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"\uac00\uaca9"}),(0,i.jsxs)("p",{className:"text-rose-500 text-xl font-medium",children:[b.pprice.toLocaleString(),"\uc6d0"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"\uc7ac\uace0"}),(0,i.jsxs)("p",{className:"text-gray-600",children:[b.pqty,"\uac1c"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"\uc0c1\ud488 \uc124\uba85"}),(0,i.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:b.pdesc})]}),(0,i.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,i.jsx)(p,{onClick:()=>{var e;e=b.pno,(0,o.oo)(e).then((e=>{console.log("\uc218\uc815\ud560 \uc81c\ud488 \ub370\uc774\ud130:",e),j(!0),u(!0),y(e)})).catch((e=>{console.error("\uc81c\ud488 \uc815\ubcf4 \uc870\ud68c \uc2e4\ud328:",e)})),w(!1)},className:"flex-1",children:"\uc218\uc815"}),(0,i.jsx)(p,{onClick:()=>{(e=>{if(window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{P(!0),(0,o.DD)(e),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),T(),window.location.reload()}catch(a){var l;console.error("Delete error:",a),401===(null===(l=a.response)||void 0===l?void 0:l.status)?alert("\uc0ad\uc81c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."):alert("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{P(!1)}})(b.pno),w(!1)},className:"flex-1 bg-red-500 hover:bg-red-600",children:"\uc0ad\uc81c"})]})]})]})]})}),h&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3},children:(0,i.jsx)(g,{isEditing:x,initialData:x?b:a,onSubmit:e=>{x?(e=>{b&&(console.log("formData:",e),P(!0),(0,o.wS)(b.pno,e).then((()=>{A(),j(!1),u(!1),y(null)})).catch((e=>{console.error("Modify or fetch error:",e),$(e)})).finally((()=>P(!1))))})(e):(async e=>{try{P(!0);const l=await(0,o.Bj)(e);console.log("\uc0c1\ud488 \ub4f1\ub85d \uacb0\uacfc:",l),await A(),j(!1),u(!1),y(null)}catch(l){console.error("\uc0c1\ud488 \ub4f1\ub85d \uc2e4\ud328:",l),alert(l.message||"\uc0c1\ud488 \ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{P(!1)}})(e)},onClose:T})})]})]})},b=()=>(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(j,{})})},77784:(e,l,a)=>{a.d(l,{A:()=>i});var s=a(65043);const t=function(){for(var e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return l.filter(((e,l,a)=>Boolean(e)&&a.indexOf(e)===l)).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o=(0,s.forwardRef)(((e,l)=>{let{color:a="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:c="",children:d,iconNode:p,...m}=e;return(0,s.createElement)("svg",{ref:l,...r,width:o,height:o,stroke:a,strokeWidth:n?24*Number(i)/Number(o):i,className:t("lucide",c),...m},[...p.map((e=>{let[l,a]=e;return(0,s.createElement)(l,a)})),...Array.isArray(d)?d:[d]])})),i=(e,l)=>{const a=(0,s.forwardRef)(((a,r)=>{let{className:i,...n}=a;return(0,s.createElement)(o,{ref:r,iconNode:l,className:t(`lucide-${c=e,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...n});var c}));return a.displayName=`${e}`,a}},39292:(e,l,a)=>{a.d(l,{A:()=>s});const s=(0,a(77784).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}}]);
//# sourceMappingURL=9302.cf6fa1a2.chunk.js.map