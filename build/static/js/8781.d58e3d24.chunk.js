"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8781],{59367:(e,t,a)=>{a.d(t,{HD:()=>c,UU:()=>p,ab:()=>i,hN:()=>x,hk:()=>h,k0:()=>g,oK:()=>m,ql:()=>d,vS:()=>n,vT:()=>u,yf:()=>o});var s=a(81895),r=a(9320);const l=`${s.i$}/api/user/products`,o=async e=>(await r.A.post(`${l}/`,e,{headers:{"Content-Type":"multipart/form-data"}})).data,n=async e=>{let{page:t,size:a,keyword:s="",type:o="t",category:n=""}=e;try{return(await r.A.get(`${l}/list`,{params:{page:t,size:9,keyword:s,type:o,category:n}})).data}catch(i){throw i}},i=async e=>{let{page:t,size:a,category:s}=e;try{return(await r.A.get(`${l}/listByCategory`,{params:{page:t,size:a,category:s}})).data}catch(o){throw console.error("Error fetching products by category:",o),o}},d=async()=>{try{return(await r.A.get(`${l}/categories`)).data}catch(e){throw console.error("Error fetching tour categories:",e.message),e}},c=async e=>(await r.A.get(`${l}/${e}`)).data,p=async(e,t)=>(await r.A.put(`${l}/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,m=async e=>(await r.A.delete(`${l}/${e}`)).data,u=async()=>(await r.A.get(`${l}/orderinfo`)).data,h=async e=>{console.log("\ubcf4\ub0b4\ub294 \uc815\ubcf4 orderInfo",e);const t={"Content-Type":"application/json"};try{const a=await r.A.post(`${l}/orders`,e,{headers:t});return console.log(a),a.data}catch(o){var a,s;throw new Error((null===(a=o.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to Post order info")}},x=async(e,t)=>{console.log("payment:",e);const a={"Content-Type":"application/json"};try{return(await r.A.post(`${l}/payment/${t}`,e,{headers:a})).data}catch(n){var s,o;throw new Error((null===(s=n.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Failed to Post payment info")}},g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;try{return(await r.A.get(`${l}/top-selling`,{params:{limit:e}})).data}catch(t){throw console.error("Error fetching top-selling products:",t.message),t}}},5138:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var s=a(70579);const r=()=>(0,s.jsx)("div",{className:"fixed top-0 left-0 z-[1055] flex h-full w-full place-items-center justify-center bg-black bg-opacity-20",children:(0,s.jsx)("div",{className:"bg-white rounded-3xl opacity-100 min-w-min h-1/4 min-w-[600px] flex justify-center items-center",children:(0,s.jsx)("div",{className:"text-4xl font-extrabold text-orange-400 m-20",children:"Loading....."})})})},54949:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var s=a(70579);const r=e=>{let{title:t,content:a,callbackFn:r}=e;return(0,s.jsx)("div",{className:"fixed top-0 left-0 z-[1055] flex h-full w-full justify-center bg-black bg-opacity-20",onClick:()=>{r&&r()},children:(0,s.jsxs)("div",{className:"absolute bg-white shadow dark:bg-gray-700 opacity-100 w-1/4 rounded mt-10 mb-10 px-6 min-w-[600px]",children:[(0,s.jsx)("div",{className:"justify-center bg-warning-400 mt-6 mb-6 text-2xl border-b-4 border-gray-500",children:t}),(0,s.jsx)("div",{className:"text-4xl border-orange-400 border-b-4 pt-4 pb-4",children:a}),(0,s.jsx)("div",{className:"justify-end flex",children:(0,s.jsx)("button",{className:"rounded bg-blue-500 mt-4 mb-4 px-6 pt-4 pb-4 text-lg text-white",onClick:()=>{r&&r()},children:"Close Modal"})})]})})}},55670:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(65043),r=a(73216),l=a(35475);const o=(e,t)=>e?parseInt(e):t,n=()=>{const e=(0,r.Zp)(),[t,a]=(0,s.useState)(!1),[n]=(0,l.ok)(),i=o(n.get("page"),1),d=o(n.get("size"),10),c=(0,l.PI)({page:i,size:d}).toString();return{moveToList:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("pageParam:",s),console.log(s?"pageParam = \ucc38":"pageParam = \uac70\uc9d3");let r="";if(s){const e=o(s.page,1),t=o(s.size,10);r=(0,l.PI)({page:e,size:t}).toString()}else r=c;console.log("queryStr:",r),e({pathname:"../list",search:r}),a(!t)},moveToModify:t=>{console.log(c),e({pathname:`../modify/${t}`,search:c})},page:i,size:d,moveToProductRead:t=>{console.log(c),e({pathname:`/user/products/read/${t}`,search:c})},moveToTourRead:t=>{console.log(c),e({pathname:`/user/tours/read/${t}`,search:c})},moveToProductReadNU:t=>{console.log(c),e({pathname:`/products/read/${t}`,search:c})},moveToTourReadNU:t=>{console.log(c),e({pathname:`/tours/read/${t}`,search:c})},refresh:t,navigate:e,moveToReadProductFromMain:t=>{console.log(c),e({pathname:`/products/read/${t}`,search:c})},moveToReadTourFromMain:t=>{console.log(c),e({pathname:`/tours/read/${t}`,search:c})}}}},98781:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(65043),r=a(59367),l=a(5138),o=a(81895),n=a(55670),i=a(54949),d=a(70579);const c=o.i$,p={pno:0,pname:"",pdesc:"",pprice:0,uploadFileNames:[]},m=e=>{let{pno:t}=e;const[a,o]=(0,s.useState)(p),[m,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),{moveToProductRead:g,moveToList:f,page:b,size:w}=(0,n.A)(),v=(0,s.useRef)();(0,s.useEffect)((()=>{u(!0),(0,r.HD)(t).then((e=>{o(e),u(!1)}))}),[t]);const y=e=>{a[e.target.name]=e.target.value,o({...a})};return(0,d.jsxs)("div",{className:"border-2 border-sky-200 mt-10 m-2 p-4",children:[m?(0,d.jsx)(l.A,{}):(0,d.jsx)(d.Fragment,{}),h?(0,d.jsx)(i.A,{title:`${h}`,content:"\uc815\uc0c1\uc801\uc73c\ub85c \ucc98\ub9ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",callbackFn:()=>{"Modified"===h?g(t):"Deleted"===h&&f({page:b,size:w}),x(null)}}):(0,d.jsx)(d.Fragment,{}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsxs)("div",{className:"relative mb-4 flex w-full flex-wrap items-stretch",children:[(0,d.jsx)("div",{className:"w-1/5 p-6 text-right font-bold",children:"Product Name"}),(0,d.jsx)("input",{className:"w-4/5 p-6 rounded-r border border-solid border-neutral-300 shadow-md",name:"pname",type:"text",value:a.pname,onChange:y})]})}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsxs)("div",{className:"relative mb-4 flex w-full flex-wrap items-stretch",children:[(0,d.jsx)("div",{className:"w-1/5 p-6 text-right font-bold",children:"DESC"}),(0,d.jsx)("textarea",{className:"w-4/5 p-6 rounded-r border border-solid border-neutral-300 shadow-md resize-y",name:"pdesc",rows:"4",onChange:y,value:a.pdesc})]})}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsxs)("div",{className:"relative mb-4 flex w-full flex-wrap items-stretch",children:[(0,d.jsx)("div",{className:"w-1/5 p-6 text-right font-bold",children:"Price"}),(0,d.jsx)("input",{className:"w-4/5 p-6 rounded-r border border-solid border-neutral-300 shadow-md",name:"price",type:"number",value:a.pprice,onChange:y})]})}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsxs)("div",{className:"relative mb-4 flex w-full flex-wrap items-stretch",children:[(0,d.jsx)("div",{className:"w-1/5 p-6 text-right font-bold",children:"Delete"}),(0,d.jsxs)("select",{className:"w-4/5 p-6 rounded-r border border-solid border-neutral-300 shadow-md",name:"delFlag",value:a.delFlag,onChange:y,children:[(0,d.jsx)("option",{value:!1,children:"\uc0ac\uc6a9"}),(0,d.jsx)("option",{value:!0,children:"\uc0ad\uc81c"})]})]})}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsxs)("div",{className:"relative mb-4 flex w-full flex-wrap items-stretch",children:[(0,d.jsx)("div",{className:"w-1/5 p-6 text-right font-bold",children:"Files"}),(0,d.jsx)("input",{className:"w-4/5 p-6 rounded-r border border-solid border-neutral-300 shadow-md",ref:v,multiple:!0,type:"file"})]})}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsxs)("div",{className:"relative mb-4 flex w-full flex-wrap items-stretch",children:[(0,d.jsx)("div",{className:"w-1/5 p-6 text-right font-bold",children:"Images"}),(0,d.jsx)("div",{className:"w-4/5 justify-center flex flex-wrap items-start",children:a.uploadFileNames.map(((e,t)=>(0,d.jsxs)("div",{className:"flex justify-center flex-col w-1/3 m-1 align-baseline",children:[(0,d.jsx)("button",{className:"bg-blue-500 text-3xl text-white",onClick:()=>(e=>{const t=a.uploadFileNames.filter((t=>t!==e));a.uploadFileNames=t,o({...a})})(e),children:"Delete"}),(0,d.jsx)("img",{src:`${c}/api/products/view/s_${e}`,alt:"img"})]},t)))})]})}),(0,d.jsxs)("div",{className:"flex justify-end p-4",children:[(0,d.jsx)("button",{type:"button",className:"inline-block rounded p-4 m-2 text-xl w-32 text-white bg-red-500",onClick:()=>{u(!0),(0,r.oK)(t).then((e=>{x("Deleted"),u(!1)}))},children:"Delete"}),(0,d.jsx)("button",{type:"button",className:"inline-block rounded p-4 m-2 text-xl w-32 text-white bg-orange-500",onClick:()=>{const e=v.current.files,s=new FormData;for(let t=0;t<e.length;t++)s.append("files",e[t]);s.append("pname",a.pname),s.append("pdesc",a.pdesc),s.append("price",a.pprice),s.append("delFlag",a.delFlag);for(let t=0;t<a.uploadFileNames.length;t++)s.append("uploadFileNames",a.uploadFileNames[t]);u(!0),(0,r.UU)(t,s).then((e=>{x("Modified"),u(!1)}))},children:"Modify"}),(0,d.jsx)("button",{type:"button",className:"rounded p-4 m-2 text-xl w-32 text-white bg-blue-500",onClick:()=>f({page:b,size:w}),children:"List"})]})]})};var u=a(73216);const h=()=>{const{pno:e}=(0,u.g)();return(0,d.jsxs)("div",{className:"p-4 w-full bg-white",children:[(0,d.jsx)("div",{className:"text-3xl font-extrabold",children:"Products Modify Page"}),(0,d.jsx)(m,{pno:e})]})}}}]);
//# sourceMappingURL=8781.d58e3d24.chunk.js.map