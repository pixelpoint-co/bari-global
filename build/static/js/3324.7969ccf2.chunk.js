"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3324],{85382:(e,t,s)=>{s.d(t,{Ol:()=>i,Wg:()=>n,aB:()=>o,sb:()=>r,yb:()=>c});var a=s(86213);const l=`${s(81895).i$}/api/tours`,r=async e=>{let{page:t,size:s=9,keyword:r="",type:n="t",category:i=""}=e;try{console.log("API params:",{page:t,size:s,keyword:r,type:n,category:i});const e=await a.A.get(`${l}/list`,{params:{page:t,size:9,keyword:r,type:n,category:i}});return console.log("API response:",e.data),e.data}catch(o){throw console.error("API Error:",o.message),o}},n=async e=>{try{return(await a.A.get(`${l}/top`,{params:{limit:e}})).data}catch(t){throw console.error("Error fetching top reserved tours:",t),t}},i=async()=>{try{return(await a.A.get(`${l}/categories`)).data}catch(e){throw console.error("Error fetching tour categories:",e.message),e}},o=async e=>(await a.A.get(`${l}/${e}`)).data,c=async(e,t)=>(await a.A.get(`${l}/available`,{params:{tno:e,selectedDate:t}})).data},96117:(e,t,s)=>{s.d(t,{HD:()=>c,SJ:()=>m,TZ:()=>n,UU:()=>d,ft:()=>i,hN:()=>g,oK:()=>x,vS:()=>r,yf:()=>o});var a=s(9320);const l=`${s(81895).i$}/api/user/tours`,r=async e=>{let{page:t,size:s=9,keyword:r="",type:n="t",category:i=""}=e;try{console.log("API params:",{page:t,size:s,keyword:r,type:n,category:i});const e=await a.A.get(`${l}/list`,{params:{page:t,size:9,keyword:r,type:n,category:i}});return console.log("API response:",e.data),e.data}catch(o){throw console.error("API Error:",o.message),o}},n=async e=>{try{return(await a.A.get(`${l}/top`,{params:{limit:e}})).data}catch(t){throw console.error("Error fetching top reserved tours:",t),t}},i=async()=>{try{return(await a.A.get(`${l}/categories`)).data}catch(e){throw console.error("Error fetching tour categories:",e.message),e}},o=async e=>(await a.A.post(`${l}/`,e,{headers:{"Content-Type":"multipart/form-data"}})).data,c=async e=>(await a.A.get(`${l}/${e}`)).data,d=async(e,t)=>(await a.A.put(`${l}/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,x=async e=>(await a.A.delete(`${l}/${e}`)).data,m=async e=>{console.log("filteredBookInfo:",e);const t={"Content-Type":"application/json"};try{return(await a.A.post(`${l}/orders`,e,{headers:t})).data}catch(n){var s,r;throw new Error((null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to Post order info")}},g=async(e,t)=>{console.log(t);const s={"Content-Type":"application/json"};try{return(await a.A.post(`${l}/payment/${t}`,e,{headers:s})).data}catch(i){var r,n;throw new Error((null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to Post payment info")}}},36226:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(54462),l=s(65043),r=s(46705),n=s(76965),i=s(81895),o=s(61966),c=s(35475),d=s(70579);const x=i.i$,m=e=>{let{rino:t,tname:s,tprice:a,tdate:l,tno:r,tqty:n,tfiles:i,changeReservation:m,email:g,availableCapacity:h}=e;console.log("\uc5ec\uae30\ub294 Reservation Items");const u=e=>{m({email:g,rino:t,tno:r,tdate:l,tqty:n+e,availableCapacity:h})};return(0,d.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-5 mb-5 transition duration-300 hover:shadow-xl",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("div",{className:"text-gray-900 text-lg font-semibold",children:s}),(0,d.jsx)("button",{className:"flex items-center space-x-2 px-2 py-1 bg-red-100 text-red-500 rounded-md hover:bg-red-200 transition-all duration-200",onClick:()=>u(-1*n),children:(0,d.jsx)(o.A,{className:"text-lg"})})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-4 mb-4",children:[(0,d.jsx)(c.N_,{to:`/user/tours/read/${r}?page=1&size=10`,className:"overflow-hidden rounded-md shadow-sm flex-1",children:(0,d.jsx)("img",{className:"w-full h-20 object-cover rounded-md",src:`${x}/api/tours/view/s_${i}`,alt:s})}),(0,d.jsxs)("div",{className:"flex flex-col justify-center flex-1",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600 font-semibold mb-1",children:"\ud83d\udcc5 Date"}),(0,d.jsx)("span",{className:"text-gray-900 text-md font-bold bg-gray-100 p-2 rounded-md text-center",children:l})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-gray-700 font-medium mb-1",children:"How Many Participants?"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Add your participants below and get ready for an unforgettable experience!"}),(0,d.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-300 rounded-md p-2 mb-4",children:[(0,d.jsx)("span",{className:"text-gray-700 text-sm font-semibold",children:"Adult"}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("button",{onClick:()=>u(-1),className:"w-8 h-8 px-3 py-1 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition duration-200",children:"-"}),(0,d.jsx)("span",{className:"text-gray-800 font-semibold",children:n}),(0,d.jsx)("button",{onClick:()=>u(1),disabled:n>=h,className:"px-3 py-1 rounded-md "+(n>=h?"bg-gray-300 text-gray-400":"text-gray-700 bg-gray-200 hover:bg-gray-300"),children:"+"})]})]})]}),(0,d.jsx)("div",{className:"flex justify-end p-2 border-t border-gray-200 mt-4",children:(0,d.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\u20a9",n*a]})})]},t)};var g=s(73216);const h=()=>{const{isLogin:e,loginState:t}=(0,a.A)(),{refreshReservation:s,reservationItems:i,changeReservation:o}=(0,r.A)(),c=(0,g.Zp)(),x=(0,l.useMemo)((()=>{let e=0;if(0===i.length)return e;for(const t of i)e+=t.tprice*t.tqty;return e}),[i]);(0,l.useEffect)((()=>{e&&s(),console.log(i)}),[e]);return(0,d.jsx)("div",{className:"flex flex-col items-center w-full px-4",children:e?(0,d.jsxs)("div",{className:"w-full max-w-lg bg-white p-6 rounded-lg shadow-lg",children:[(0,d.jsxs)("div",{className:"mb-6 border-b pb-4 flex items-center space-x-2",children:[(0,d.jsx)(n.A,{className:"text-gray-500 text-2xl"}),(0,d.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Reservation Options"})]}),(0,d.jsx)("div",{className:"mb-6 space-y-4",children:i.length>0?i.map((e=>(0,l.createElement)(m,{email:t.email,...e,key:e.rino,changeReservation:o}))):(0,d.jsx)("p",{className:"text-center text-gray-500",children:"Your reservation is empty."})}),(0,d.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[x&&(0,d.jsxs)("p",{className:"text-lg sm:text-xl font-bold text-gray-800",children:["Total: \u20a9",x.toLocaleString()]}),(0,d.jsxs)("p",{className:"text-gray-500",children:[i.length," items"]})]}),(0,d.jsx)("div",{className:"text-center mt-6",children:(0,d.jsx)("button",{className:"text-white font-semibold py-2 px-6 rounded-lg bg-stone-400 hover:bg-stone-600 transition duration-300 shadow-md w-full sm:w-auto",onClick:()=>{console.log(i.length),0!==i.length?c("/user/tours/book"):alert("The reservation is empty. Please select at least one tour.")},children:"Book now"})})]}):(0,d.jsx)("p",{className:"text-center text-gray-500 mt-6",children:"Please log in to see your reservation."})})}},15451:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(65043),l=s(31882),r=s(59654),n=s(54462),i=s(70579);const o=e=>{let{selectedReview:t,closeEditModal:s,deleteOne:o,putOne:c}=e;console.log("selectedReview.trid",t.trid);const{loginState:d}=(0,n.A)(),[x,m]=(0,a.useState)(!1),[g,h]=(0,a.useState)({prid:t.prid,trid:t.trid,title:t.title,reviewContent:t.reviewContent,rating:t.rating});if(!t)return null;const u=e=>{const{name:t,value:s}=e.target;h((e=>({...e,[t]:s})))};return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[t.email===d.email&&(0,i.jsx)("div",{className:"absolute top-5 right-5 px-3 py-1 text-sm font-semibold text-white bg-teal-500 rounded-lg shadow-md",children:"My Review"}),x?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("div",{className:"bg-stone-400 text-white rounded-full w-12 h-12 flex items-center justify-center font-bold text-lg",children:t.nickName[0]}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:t.nickName}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:t.itemName})]})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[(0,i.jsx)("p",{className:"text-gray-600 font-medium",children:"Update your rating:"}),(0,i.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map((e=>(0,i.jsx)("span",{onClick:()=>{return t=e,void h((e=>({...e,rating:t})));var t},className:"cursor-pointer",children:g.rating>=e?(0,i.jsx)(l.A,{className:"text-yellow-400 text-2xl"}):(0,i.jsx)(r.A,{className:"text-gray-300 text-2xl"})},e)))})]}),(0,i.jsx)("div",{className:"flex flex-row justify-between mb-4",children:(0,i.jsx)("input",{type:"text",name:"title",value:g.title,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Enter title"})}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("textarea",{name:"reviewContent",value:g.reviewContent,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Enter review content"})}),(0,i.jsxs)("div",{className:"flex justify-end mt-6",children:[(0,i.jsx)("button",{className:"px-4 py-2 bg-yellow-400 text-white rounded-lg mr-2 hover:bg-yellow-500",onClick:()=>{console.log("editData.trid",g.trid),console.log(g.reviewContent),c(g).then((()=>{s()}))},children:"Save"}),(0,i.jsx)("button",{className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",onClick:()=>m(!1),children:"Cancel"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:" flex items-center mb-4",children:[(0,i.jsx)("div",{className:"bg-stone-400 text-white rounded-full w-12 h-12 flex items-center justify-center font-bold text-lg",children:t.nickName[0]}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:t.nickName}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:t.dueDate}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:t.itemName})]})]}),(0,i.jsx)("div",{className:"flex items-center mb-4",children:[1,2,3,4,5].map((e=>(0,i.jsx)("span",{children:t.rating>=e?(0,i.jsx)(l.A,{className:"text-yellow-400 text-2xl"}):(0,i.jsx)(r.A,{className:"text-gray-300 text-2xl"})},e)))}),(0,i.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),(0,i.jsx)("p",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 text-gray-800 leading-relaxed",children:t.reviewContent}),(0,i.jsxs)("div",{className:"flex justify-end mt-6",children:[t.email===d.email&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"px-4 py-2 bg-yellow-400 text-white rounded-lg mr-2 hover:bg-yellow-500",onClick:()=>{m(!0)},children:"Modify"}),(0,i.jsx)("button",{className:"px-4 py-2 bg-stone-400 text-white rounded-lg mr-2 hover:bg-stone-500",onClick:()=>{return e=t.prid||t.trid,console.log("rid",e),void o(e).then((()=>{s()}));var e},children:"Delete"})]}),(0,i.jsx)("button",{className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",onClick:s,children:"Close"})]})]})]})})}},86844:(e,t,s)=>{s.d(t,{A:()=>m});var a=s(65043),l=s(9463),r=s(38326),n=s(31882),i=s(59654),o=s(73216),c=s(15451),d=s(54462),x=s(70579);const m=e=>{let{refresh:t,setRefresh:s,reviews:m,putOne:g,deleteOne:h}=e;const[u,y]=(0,a.useState)(0),p=(0,o.Zp)(),[f,v]=(0,a.useState)(window.innerWidth),[b,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),{isLogin:A,loginState:C}=(0,d.A)();console.log(m),a.useEffect((()=>{const e=()=>v(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const k=f>=1024?2:1;return(0,x.jsxs)("div",{className:"mt-10 bg-gray-50 p-6 border border-gray-200 rounded-lg shadow-lg",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,x.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"What Customers Say About This Item"}),A?(0,x.jsx)("button",{className:"px-4 py-2 text-gray-500 underline hover:text-gray-600",onClick:()=>{p("/mypage/review")},children:"Go to Your Review List"}):""]}),(0,x.jsxs)("div",{className:"relative flex items-center",children:[(0,x.jsx)("button",{className:"absolute left-[-20px] z-10 bg-white border border-gray-300 rounded-full w-8 h-8 flex items-center justify-center shadow-md hover:bg-gray-100",onClick:()=>{y((e=>e-k>=0?e-k:m.length-k))},children:(0,x.jsx)(l.A,{className:"h-5 w-5 text-gray-700"})}),(0,x.jsx)("div",{className:"flex space-x-4 overflow-hidden w-full",children:m&&m.slice(u,u+k).map((e=>(0,x.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md p-4 w-full lg:w-1/2 border border-gray-200",onClick:()=>(e=>{j(e),N(!0)})(e),children:[(0,x.jsxs)("div",{className:"flex items-center mb-2",children:[(0,x.jsx)("div",{className:"bg-stone-400 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:e.nickName[0]}),(0,x.jsxs)("div",{className:"ml-3",children:[(0,x.jsx)("h3",{className:"text-sm font-semibold text-gray-800",children:e.nickName}),(0,x.jsx)("p",{className:"text-xs text-gray-500",children:e.dueDate})]})]}),A&&e.email===C.email&&(0,x.jsx)("div",{className:"absolute top-5 right-5 px-3 py-1 text-sm font-semibold text-white bg-teal-500 rounded-lg shadow-md",children:"My Review"}),(0,x.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map((t=>(0,x.jsx)("span",{children:e.rating>=t?(0,x.jsx)(n.A,{className:"text-yellow-400 text-xl"}):(0,x.jsx)(i.A,{className:"text-gray-300 text-xl"})},t)))}),(0,x.jsx)("h3",{className:"text-gray-800 leading-relaxed mb-2 font-semibold",children:e.title}),(0,x.jsx)("p",{className:"text-sm text-gray-700",children:e.reviewContent})]},e.prid||e.trid)))}),(0,x.jsx)("button",{className:"absolute right-[-20px] z-10 bg-white border border-gray-300 rounded-full w-8 h-8 flex items-center justify-center shadow-md hover:bg-gray-100",onClick:()=>{y((e=>e+k<m.length?e+k:0))},children:(0,x.jsx)(r.A,{className:"h-5 w-5 text-gray-700"})})]}),w&&(0,x.jsx)(c.A,{selectedReview:b,closeEditModal:()=>{j(null),N(!1),s(!t)},putOne:g,deleteOne:h})]})}},35653:(e,t,s)=>{s.d(t,{A:()=>c});s(65043);var a=s(81210),l=s(11951),r=s(30119),n=s(53722),i=s(8999),o=s(70579);const c=()=>{const e=[{icon:(0,o.jsx)(a.A,{className:"text-2xl text-blue-500"}),title:"Easy Cancellation",description:"Full refund if canceled up to 24 hours in advance"},{icon:(0,o.jsx)(l.A,{className:"text-2xl text-blue-500"}),title:"Reserve Now, Pay Later",description:"Keep your travel plans flexible. Reserve your spot now and pay later."},{icon:(0,o.jsx)(r.A,{className:"text-2xl text-blue-500"}),title:"Duration: 1.5 Hours",description:"Check availability to see start times."},{icon:(0,o.jsx)(n.A,{className:"text-2xl text-blue-500"}),title:"Guided Language",description:"English"},{icon:(0,o.jsx)(i.A,{className:"text-2xl text-blue-500"}),title:"Audio Guide Included",description:"Available in Spanish, Thai, Chinese, English, French, German, Indonesian, Italian, Arabic, Japanese, Norwegian"},{icon:(0,o.jsx)(n.A,{className:"text-2xl text-blue-500"}),title:"Wheelchair Accessible",description:""}];return(0,o.jsx)("div",{className:"space-y-4",children:e.map(((e,t)=>(0,o.jsxs)("div",{className:"flex items-start space-x-4",children:[e.icon,(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.title}),(0,o.jsx)("p",{className:"text-gray-600",children:e.description})]})]},t)))})}},3324:(e,t,s)=>{s.d(t,{A:()=>A});var a=s(65043),l=s(81895),r=s(86844),n=s(14918),i=s(51419),o=s(52194),c=s(3567),d=s(37490),x=s(31882),m=s(59654),g=s(81210),h=s(53722),u=s(36226),y=s(46705),p=s(54462),f=s(96117),v=s(35653),b=s(51776),j=s(85382),w=s(70579);const N={tno:0,tname:"",categoryName:"",tdesc:"",tprice:0,taddress:"",uploadFileNames:[],tdate:[],maxCapacity:0},A=e=>{let{tno:t}=e;const[s,A]=(0,a.useState)(N),[C,k]=(0,a.useState)(""),[$,S]=(0,a.useState)(0),[E,F]=(0,a.useState)(0),[R,T]=(0,a.useState)(!1),[P,I]=(0,a.useState)(!1),{favItems:D,changeFav:Y,refreshFav:z}=(0,b.A)(),{reservationItems:M,changeReservation:L}=(0,y.A)(),[O,q]=(0,a.useState)(0),[W,H]=(0,a.useState)([]),[B,G]=(0,a.useState)(!1),[U,J]=(0,a.useState)(0),{loginState:Z}=(0,p.A)();console.log(M);(0,a.useEffect)((()=>{window.scrollTo(0,0),(0,f.HD)(t).then((e=>{A(e)})),(0,l.s8)(t).then((e=>{H(e),q((e=>{if(0===e.length)return 0;const t=e.reduce(((e,t)=>e+t.rating),0)/e.length;return Number(t.toFixed(1))})(e))}))}),[t,B]),(0,a.useEffect)((()=>{C&&(S(0),T(!1),(0,j.yb)(t,C).then((e=>{console.log(e),A({...s,availableCapacity:e}),J(e)})))}),[C,t]);const K=(0,w.jsxs)("div",{style:{width:300},children:[(0,w.jsx)(o.A,{fullscreen:!1,onSelect:e=>k(e.format("YYYY-MM-DD")),disabledDate:e=>!s.tdate.some((t=>t===e.format("YYYY-MM-DD")))}),(0,w.jsx)("div",{style:{textAlign:"center",marginTop:10,color:"#888"},children:"Only available dates can be selected"})]});return(0,w.jsxs)("div",{className:"min-h-screen py-12 px-4 sm:px-14 lg:px-20 lg:py-32 mt-20",children:[(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row items-start space-y-8 lg:space-y-0 lg:space-x-8",children:[(0,w.jsx)("div",{className:"lg:flex-1",children:(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("img",{src:`${l.i$}/api/tours/view/${s.uploadFileNames[E]}`,alt:"Tour",className:"w-full h-60 md:h-80 lg:h-[500px] object-contain"}),(0,w.jsx)("div",{className:"flex mt-4 space-x-2 overflow-x-auto",children:s.uploadFileNames.map(((e,t)=>(0,w.jsx)("button",{onClick:()=>F(t),className:"w-16 h-16 md:w-20 md:h-20 overflow-hidden "+(E===t?"ring-2 ring-blue-500":""),children:(0,w.jsx)("img",{src:`${l.i$}/api/tours/view/${e}`,alt:"Thumbnail",className:"w-full h-full object-cover"})},t)))})]})}),(0,w.jsxs)("div",{className:"lg:flex-1",children:[(0,w.jsx)("h1",{className:"text-3xl md:text-4xl font-light text-gray-900 mb-4",children:s.tname}),(0,w.jsxs)("div",{className:"flex items-center mb-4",children:[[...Array(5)].map(((e,t)=>(0,w.jsx)("span",{children:O>=t+1?(0,w.jsx)(x.A,{className:"text-yellow-400 text-xl"}):(0,w.jsx)(m.A,{className:"text-gray-300 text-xl"})},t))),(0,w.jsxs)("span",{className:"ml-2 text-gray-600",children:["(",O,") ",W.length,"  reviews"]})]}),(0,w.jsxs)("p",{className:"text-xl md:text-2xl font-light text-gray-900 mb-6",children:["\u20a9",s.tprice.toLocaleString()]}),(0,w.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,w.jsx)("strong",{children:"Tour Address:"})," ",s.taddress]}),(0,w.jsx)("p",{className:"text-gray-700 mb-6",children:s.tdesc}),(0,w.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-gray-700 mb-2",children:[(0,w.jsx)(g.A,{className:"mr-2"}),"Date"]}),(0,w.jsx)(c.A,{content:K,trigger:"click",children:(0,w.jsx)("button",{className:"w-full border rounded-lg p-3 text-left",children:C||"Select a date"})})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-gray-700 mb-2",children:[(0,w.jsx)(h.A,{className:"mr-2"}),"Person"]}),(0,w.jsx)("input",{type:"number",min:"0",max:U,value:$,onChange:e=>S(Number(e.target.value)),className:"w-full border rounded-lg p-3 text-center",placeholder:"0"})]})]}),(0,w.jsxs)("div",{className:"p-2 rounded-lg flex justify-end items-center space-x-3",children:[(0,w.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:[(0,w.jsx)("span",{children:"Available"}),(0,w.jsx)(d.A,{count:C?U>0?U:"Full":"Select a Date",style:{backgroundColor:C?U>0?"#14b8a6":"#ef4444":"#d9d9d9",color:"white",marginLeft:"5px"}})]}),(0,w.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:[(0,w.jsx)("span",{children:"Max"}),(0,w.jsx)(d.A,{count:s.maxCapacity,style:{backgroundColor:"#3b82f6",color:"white",marginLeft:"5px"}})]})]}),(0,w.jsxs)("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mt-6",children:[(0,w.jsxs)("button",{onClick:()=>{if(0===U)return void alert("This tour is fully booked.");if(!C||$<=0)return void alert("Please select a valid date and quantity.");const e=M.find((e=>e.tno===s.tno)),t=(e,t)=>{L({email:Z.email,tno:s.tno,tqty:e,tdate:t}),T(!0)};if(!e)return $>U?void alert(`You can only add up to ${U} for this tour.`):void t($,C);const a=e.tqty||0,l=a+$;if(C===e.tdate){const s=e.availableCapacity-a;l>e.availableCapacity?s>0?(alert(`You can only add ${s} more of this tour.`),t(a+s,C)):alert(`You already have the maximum quantity of ${e.availableCapacity} in your cart.`):t(l,C)}else window.confirm("Would you like to change to a different date?")&&($>U?alert(`You can only add up to ${U} for the selected date.`):t($,C))},className:"bg-stone-400 hover:bg-stone-600 text-white py-3 px-6 rounded-lg flex items-center justify-center",children:[(0,w.jsx)(g.A,{className:"mr-2"}),"Update Availability"]}),(0,w.jsxs)("button",{onClick:async()=>{if(!Z.email)return void alert("Please log in to add favorites.");if(D.some((e=>e.tno===s.tno)))alert("You already liked this tour!");else try{await Y({email:Z.email,tno:s.tno}),alert("Product added to favorites!"),z()}catch(e){console.error("Failed to add favorite:",e),alert("Could not add to favorites. Please try again.")}},className:"flex-1 border text-gray-700 py-3 rounded-lg flex items-center justify-center hover:bg-gray-100",children:[(0,w.jsx)(n.A,{className:"mr-2 text-red-500"}),"Add to Favorites"]})]}),(0,w.jsxs)("div",{className:"mt-10 bg-gray-100 p-6 rounded-lg",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Tour Policies"}),(0,w.jsx)("button",{onClick:()=>I(!P),className:"text-gray-500 hover:text-gray-700 text-2xl",children:P?"-":"+"})]}),P&&(0,w.jsx)(v.A,{})]})]})]}),(0,w.jsx)("div",{className:"fixed top-24 right-10",children:(0,w.jsx)(d.A,{count:M.length,offset:[0,10],children:(0,w.jsx)("button",{onClick:()=>T(!R),className:"bg-stone-400 hover:bg-stone-600 text-white p-3 rounded-full shadow-lg flex items-center justify-center",children:(0,w.jsx)(i.A,{className:"h-6 w-6"})})})}),(0,w.jsx)("div",{className:`z-50 fixed top-0 right-0 h-[70%] w-96 mt-40 p-6 overflow-auto transform ${R?"translate-x-0":"translate-x-full"} transition-transform duration-300`,children:(0,w.jsx)(u.A,{})}),(0,w.jsx)("div",{className:"mt-5",children:(0,w.jsx)(r.A,{refresh:B,setRefresh:G,reviews:W,putOne:l.MH,deleteOne:l.mA})})]})}},46705:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(83003),l=s(97765);const r=()=>{const e=(0,a.d4)((e=>e.reservationSlice)),t=(0,a.wA)();return{reservationItems:e,refreshReservation:()=>{console.log("useCustomReservation: refresh"),t((0,l.l5)())},changeReservation:e=>{t((0,l.TJ)(e))}}}},51776:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(65043),l=s(83003),r=s(37874),n=s(54462);const i=()=>{const{loginState:e}=(0,n.A)(),t=e.email,s=(0,l.d4)((e=>e.favTour.items||[])),i=(0,l.wA)(),o=(0,a.useCallback)((()=>{i((0,r.ut)(t))}),[i,t]),c=(0,a.useCallback)((async e=>{s.some((t=>t.tno===e.tno))?alert("This tour is already in your favorites!"):(await i((0,r.m7)(e)),o())}),[i,s,o]),d=(0,a.useCallback)((async e=>{await i((0,r.oE)(e)),o()}),[i,o]),x=(0,a.useCallback)((e=>{i((0,r.g4)(e)).then((()=>o()))}),[i,o]);return{favItems:s,refreshFav:o,changeFav:c,deleteFav:d,deleteBulkFav:x}}}}]);
//# sourceMappingURL=3324.7969ccf2.chunk.js.map