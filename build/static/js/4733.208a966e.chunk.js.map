{"version":3,"file":"static/js/4733.208a966e.chunk.js","mappings":"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","sources":["components/admin/AdminCouponComponents.js","pages/admin/AdminCouponPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Table, Button, Card, Space, Input, Select, message, Modal } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { fetchCoupons } from '../../api/AdminApi'; // Import API call\n\nconst { Option } = Select;\n\nconst AdminCouponComponents = () => {\n  const [coupons, setCoupons] = useState([]);\n  const [filteredCoupons, setFilteredCoupons] = useState([]);\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [loading, setLoading] = useState(false);\n  const [searchValue, setSearchValue] = useState('');\n  const [isModalVisible, setIsModalVisible] = useState(false); // Modal visibility\n  const [selectedCouponUsers, setSelectedCouponUsers] = useState([]); // Users for modal\n\n  // Fetch coupon data from API\n  const loadCoupons = async () => {\n    setLoading(true);\n    try {\n      const data = await fetchCoupons();\n      setCoupons(data);\n      setFilteredCoupons(data); // Initially display all reservations\n    } catch (error) {\n      message.error('쿠폰 정보를 불러오는데 실패했습니다.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadCoupons();\n  }, []);\n\n  // Handle Search and Filter\n  useEffect(() => {\n    const filtered = coupons.filter((coupon) => {\n      const lowerValue = searchValue.toLowerCase();\n      const removeHyphenValue = searchValue.split('-').join('');\n      const removeWonAndCommaValue = searchValue.split('₩').join('').split(',').join('');\n\n      // Filter status\n      const matchesStatus =\n        filterStatus === 'all'\n          ? true\n          : filterStatus === 'active'\n          ? coupon.isActive\n          : !coupon.isActive;\n\n      // Search condition\n      const matchesSearch =\n        `${coupon.couponName}`.toLowerCase().includes(lowerValue) ||\n        `${coupon.discount}`.includes(removeWonAndCommaValue) ||\n        `${coupon.expirationDate}`.split('-').join('').includes(removeHyphenValue);\n\n      return matchesStatus && matchesSearch;\n    });\n\n    setFilteredCoupons(filtered);\n  }, [searchValue, filterStatus, coupons]);\n\n  // Show Modal with selected coupon's users\n  const showModal = (userCouponList) => {\n    setSelectedCouponUsers(userCouponList || []); // Set users or empty array\n    setIsModalVisible(true); // Show modal\n  };\n\n  // Hide Modal\n  const hideModal = () => {\n    setIsModalVisible(false);\n    setSelectedCouponUsers([]);\n  };\n\n  const columns = [\n    {\n      title: '쿠폰 번호',\n      dataIndex: 'couponId',\n      key: 'couponId',\n    },\n    {\n      title: '쿠폰명',\n      dataIndex: 'couponName',\n      key: 'couponName',\n    },\n    {\n      title: '할인 금액',\n      dataIndex: 'discount',\n      key: 'discount',\n      render: (price) => `₩${price.toLocaleString()}`,\n    },\n    {\n      title: '만기일',\n      dataIndex: 'expirationDate',\n      key: 'expirationDate',\n      render: (date) => (date ? date : '결제 정보 없음'),\n    },\n    {\n      title: '쿠폰 활성화 상태',\n      dataIndex: 'isActive',\n      key: 'isActive',\n      render: (isActive) => (isActive ? 'Active' : 'Inactive'),\n    },\n    {\n      title: '쿠폰 보유 회원 목록',\n      key: 'userCouponList',\n      render: (_, record) => (\n        record.userCouponList && record.userCouponList.length > 0 ? (\n          <Button type=\"link\" onClick={() => showModal(record.userCouponList)}>\n            보기\n          </Button>\n        ) : (\n          <span>쿠폰 보유 회원 목록이 없습니다.</span>\n        )\n      ),\n    }\n  ];\n\n  const userColumns = [\n    {\n      title: '이메일',\n      dataIndex: 'email',\n      key: 'email',\n    },\n    {\n      title: '회원 이름',\n      dataIndex: 'userName',\n      key: 'userName',\n    },\n    {\n      title: '사용 날짜',\n      dataIndex: 'useDate',\n      key: 'useDate',\n      render: (useDate) => (useDate ? useDate : '미사용'),\n    },\n  ];\n\n  return (\n    <div className=\"p-8 bg-gray-100\">\n      <Card style={{ marginBottom: '16px' }}>\n        <Space>\n          {/* Search Type Selector */}\n          <Select\n            defaultValue=\"쿠폰 활성화 상태\"\n            style={{\n              width: 150,\n              height: 34,\n              display: 'inline-flex',\n              alignItems: 'center',\n            }}\n            onChange={(value) => setFilterStatus(value)}\n          >\n            <Option value=\"all\">all</Option>\n            <Option value=\"active\">Active</Option>\n            <Option value=\"inactive\">Inactive</Option>\n          </Select>\n\n          {/* Search Input */}\n          <Input\n            placeholder=\"쿠폰 검색 (쿠폰명, 할인금액, 만기일)\"\n            prefix={<SearchOutlined />}\n            onChange={(e) => setSearchValue(e.target.value)}\n            style={{\n              width: 400,\n              height: 34,\n              display: 'inline-flex',\n              alignItems: 'center',\n              verticalAlign: 'middle',\n            }}\n          />\n        </Space>\n      </Card>\n\n      {/* Reservations Table */}\n      <Table\n        pagination={{\n          position: ['bottomLeft'],\n          pageSize: 10,\n          showQuickJumper: true,\n        }}\n        columns={columns}\n        dataSource={filteredCoupons}\n        rowKey=\"couponId\"\n        loading={loading}\n      />\n\n      {/* Modal for Coupon Users */}\n      <Modal\n        title=\"쿠폰 보유 회원 목록\"\n        visible={isModalVisible}\n        onCancel={hideModal}\n        footer={null} // No footer buttons\n      >\n        <Table\n          columns={userColumns}\n          dataSource={selectedCouponUsers}\n          rowKey=\"email\"\n          pagination={false} // Disable pagination for modal\n        />\n      </Modal>\n    </div>\n  );\n};\n\nexport default AdminCouponComponents;\n","import React from 'react'\nimport AdminCouponComponents from '../../components/admin/AdminCouponComponents'\n\n\nconst AdminCouponPage = () => {\n    return (\n        <div className='w-full'>\n            <AdminCouponComponents />\n        </div>\n    )\n}\n\nexport default AdminCouponPage"],"names":["Option","Select","AdminCouponComponents","coupons","setCoupons","useState","filteredCoupons","setFilteredCoupons","filterStatus","setFilterStatus","loading","setLoading","searchValue","setSearchValue","isModalVisible","setIsModalVisible","selectedCouponUsers","setSelectedCouponUsers","useEffect","async","data","fetchCoupons","error","message","loadCoupons","filtered","filter","coupon","lowerValue","toLowerCase","removeHyphenValue","split","join","removeWonAndCommaValue","matchesStatus","isActive","matchesSearch","couponName","includes","discount","expirationDate","columns","title","dataIndex","key","render","price","toLocaleString","date","_","record","userCouponList","length","_jsx","Button","type","onClick","showModal","children","_jsxs","className","Card","style","marginBottom","Space","defaultValue","width","height","display","alignItems","onChange","value","Input","placeholder","prefix","SearchOutlined","e","target","verticalAlign","Table","pagination","position","pageSize","showQuickJumper","dataSource","rowKey","Modal","visible","onCancel","hideModal","footer","useDate","AdminCouponPage"],"sourceRoot":""}